import{R as y,u as j,r as l,j as a,a as r}from"./index-CJZIpSYr.js";function N(){j();const[o,m]=l.useState([]),[p,c]=l.useState([]),[g,n]=l.useState(!0),i=localStorage.getItem("id"),h=async()=>{try{const e=await r.get(`/movie/playlist/${i}`);m(e.data.movieLists)}catch(e){console.log("error inside listData",e)}finally{n(!1)}},b=async()=>{n(!0);const e=[];for(let s=0;s<o.length;s++){const t=o[s].id,v=o[s].public;try{const u=(await r.get(`/movieById?imdbID=${t}`)).data;u.public=v,e.push(u)}catch(d){console.log("Error in fetching movie details",d)}}c(e),n(!1),console.log(e)},f=async e=>{console.log("inside handlePublic",e+" "+i);try{await r.put("/movie/makePublic",{imdbID:e,userId:i},{headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")}}),c(s=>s.map(t=>t.imdbID===e?{...t,public:!0}:t))}catch(s){console.log("Error submitting Movie",s)}},x=async e=>{console.log("inside handlePrivate",e+" "+i);try{await r.put("/movie/makePrivate",{imdbID:e,userId:i},{headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")}}),c(s=>s.map(t=>t.imdbID===e?{...t,public:!1}:t))}catch(s){console.log("Error submitting Movie",s)}};return l.useEffect(()=>{h()},[]),l.useEffect(()=>{o.length>0&&b()},[o]),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-20 p-6 mr-[10%] ml-[10%] mx-auto",children:[g&&a.jsx("div",{className:"loader"}),p.map(e=>a.jsxs("div",{className:"bg-white shadow-md rounded-lg overflow-hidden",children:[a.jsx("img",{src:e.Poster,alt:e.Title,className:"w-96 h-64 object-cover m-auto"}),a.jsxs("div",{className:"p-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:e.Title}),a.jsx("p",{className:"flex text-black m-auto justify-around font-semibold",children:e.Year})]}),e.public?a.jsx("span",{className:"material-symbols-outlined ml-[90%] cursor-pointer",onClick:()=>x(e.imdbID),children:"person"}):a.jsx("span",{className:"material-symbols-outlined ml-[90%] cursor-pointer",onClick:()=>f(e.imdbID),children:"groups"})]},e.imdbID))]})}const w=y.memo(N);export{w as default};
