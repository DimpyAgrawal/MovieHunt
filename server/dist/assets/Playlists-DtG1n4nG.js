import{R as y,u as j,r as a,a as r,j as o}from"./index-8VQHLJQJ.js";function k(){j();const[l,m]=a.useState([]),[p,c]=a.useState([]),[g,n]=a.useState(!0),i=localStorage.getItem("id"),h=a.useCallback(async()=>{try{const e=await r.get(`/movie/playlist/${i}`);m(e.data.movieLists),n(!1)}catch(e){console.log("error inside listdata",e)}}),b=a.useCallback(async()=>{n(!0);const e=[];for(let s=0;s<l.length;s++){const t=l[s].id,v=l[s].public;try{const u=(await r.get(`/movieById?imdbID=${t}`)).data;u.public=v,e.push(u),c(e),n(!1)}catch(d){console.log("Error in fetching movie details",d)}}}),x=a.useCallback(async e=>{console.log("inside handlePublic",e+" "+i);try{await r.put("/movie/makePublic",{imdbID:e,userId:i},{headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")}}),c(s=>s.map(t=>t.imdbID===e?{...t,public:!0}:t))}catch(s){console.log("Error submitting Movie",s)}}),f=a.useCallback(async e=>{console.log("inside handlePrivate",e+" "+i);try{await r.put("/movie/makePrivate",{imdbID:e,userId:i},{headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")}}),c(s=>s.map(t=>t.imdbID===e?{...t,public:!1}:t))}catch(s){console.log("Error submitting Movie",s)}});return a.useEffect(()=>{h()},[]),a.useEffect(()=>{l.length>0&&b()},[l]),o.jsxs("div",{className:"grid grid-cols-1  md:grid-cols-2 lg:grid-cols-3 gap-20 p-6 mr-[10%] ml-[10%] mx-auto",children:[g&&o.jsx("div",{className:"loader"}),p.map(e=>o.jsxs("div",{className:"bg-white shadow-md rounded-lg overflow-hidden",children:[o.jsx("img",{src:e.Poster,alt:e.Title,className:"w-96 h-64 object-cover m-auto"}),o.jsxs("div",{className:"p-4",children:[o.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:e.Title}),o.jsx("p",{className:"flex text-black m-auto justify-around font-semibold",children:e.Year})]}),e.public?o.jsx("span",{class:"material-symbols-outlined ml-[90%] cursor-pointer",onClick:()=>f(e.imdbID),children:"person"}):o.jsx("span",{class:"material-symbols-outlined ml-[90%] cursor-pointer",onClick:()=>x(e.imdbID),children:"groups"})]},e.id))]})}const w=y.memo(k);export{w as default};
