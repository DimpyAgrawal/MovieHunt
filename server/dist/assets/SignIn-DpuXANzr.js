import{u as v,r as k,j as t,N as j}from"./index-DjEhrgzQ.js";import{a as S}from"./axios-B4uVmeYG.js";import{B as g}from"./ReactToastify-B0Y0RKuG.js";function m(r){this.message=r}m.prototype=new Error,m.prototype.name="InvalidCharacterError";var p=typeof window<"u"&&window.atob&&window.atob.bind(window)||function(r){var e=String(r).replace(/=+$/,"");if(e.length%4==1)throw new m("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,o,s=0,l=0,d="";o=e.charAt(l++);~o&&(n=s%4?64*n+o:o,s++%4)?d+=String.fromCharCode(255&n>>(-2*s&6)):0)o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(o);return d};function N(r){var e=r.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw"Illegal base64url string!"}try{return function(n){return decodeURIComponent(p(n).replace(/(.)/g,function(o,s){var l=s.charCodeAt(0).toString(16).toUpperCase();return l.length<2&&(l="0"+l),"%"+l}))}(e)}catch{return p(e)}}function c(r){this.message=r}function I(r,e){if(typeof r!="string")throw new c("Invalid token specified");var n=(e=e||{}).header===!0?0:1;try{return JSON.parse(N(r.split(".")[n]))}catch(o){throw new c("Invalid token specified: "+o.message)}}c.prototype=new Error,c.prototype.name="InvalidTokenError";function U(){const r=()=>g.success("Sign in successful"),e=a=>g.error(a),n={email:"",password:""},o=v(),[s,l]=k.useState(n),{email:d,password:h}=s,u=a=>{l({...s,[a.target.name]:a.target.value})},f=a=>{if(a.preventDefault(),!s.email||!s.password){e("Please fill in all the details");return}S.post("/login",s).then(i=>{const{name:w,email:b,id:x,pic:y}=I(i.data.data);localStorage.setItem("token",i.data.data),localStorage.setItem("id",x),localStorage.setItem("name",w),localStorage.setItem("email",b),localStorage.setItem("loggedin",!0),localStorage.setItem("pic",y),r(),o("/")}).catch(i=>{console.log(i.response),i.response&&i.response.data?i.response.data.includes("Password does not match")?e("Password does not match"):i.response.data.includes("User does not exist")?e("User does not exist"):e("An error occurred while login"):i.request?e("No response received from the server"):e("An error occurred while login"),console.error("Error:",i)})};return t.jsx("div",{className:"flex flex-col w-[100%] h-[96vh] ",children:t.jsxs("div",{className:"flex w-[60%] h-[70%]  bg-white shadow-2xl m-auto p-8 rounded-md",children:[t.jsx("div",{className:"w-[100%] md:w-[50%] m-auto  mt-0  ",children:t.jsxs("div",{className:" w-[100%] md:w-[90%]  ",children:[t.jsx("h1",{className:"font-bold text-2xl mb-5",children:"Login"}),t.jsx("p",{children:"Your Email"}),t.jsx("input",{type:"email",name:"email",id:"email",value:d,onChange:a=>u(a),class:"bg-gray-50 border mb-5 border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"name@company.com",required:""}),t.jsx("p",{children:"Password"}),t.jsx("input",{type:"password",name:"password",id:"password",value:h,placeholder:"••••••••",onChange:a=>u(a),class:"bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",required:""}),t.jsx("button",{type:"button",className:" p-1 rounded-md text-white font-semibold mt-8 bg-blue-500 w-[100%] m-auto",onClick:a=>f(a),children:"Sign In"}),t.jsxs("p",{className:"text-sm font-light mt-3  text-gray-400",children:["Don’t have an account yet? ",t.jsx(j,{to:"/signup",className:"font-medium text-primary-600 hover:underline text-[#e36414]",children:"Sign up"})]})]})}),t.jsx("div",{className:"w-0  md:w-[80%]",children:t.jsx("img",{className:" md:h-[90%] invisible	 md:visible  ",src:"https://tecdn.b-cdn.net/img/Photos/new-templates/bootstrap-login-form/draw2.svg",alt:""})})]})})}export{U as default};
