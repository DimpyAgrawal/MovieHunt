import{R as x,r,j as s}from"./index-DjEhrgzQ.js";import{a as i}from"./axios-B4uVmeYG.js";function f(){const[o,d]=r.useState([]),[l,n]=r.useState([]),a=localStorage.getItem("id"),m=async()=>{try{const e=await i.get(`/movie/playlist/${a}`);d(e.data.movieLists)}catch(e){console.log("error inside listdata",e)}},u=async()=>{const e=[];for(let t=0;t<o.length;t++){const g=o[t].id;try{const c=await i.get(`/movieById?imdbID=${g}`);e.push(c.data),n(e)}catch(c){console.log("Error in fetching movie details",c)}}},h=async e=>{console.log("inside handlePublic",e+" "+a);try{await i.put("/movie/makePublic",{imdbID:e,userId:a},{headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")}}),n(l.map(t=>t.imdbID===e?{...t,othersCanSee:!0}:t))}catch(t){console.log("Error submitting Movie",t)}},p=async e=>{try{await i.put("/movie/makePrivate",{imdbID:e,userId:a},{headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")}}),n(l.map(t=>t.imdbID===e?{...t,othersCanSee:!1}:t))}catch(t){console.log("Error submitting Movie",t)}};return r.useEffect(()=>{m()},[]),r.useEffect(()=>{o.length>0&&u()},[o]),s.jsx("div",{className:"grid grid-cols-1  md:grid-cols-2 lg:grid-cols-3 gap-20 p-6 mr-[10%] ml-[10%] mx-auto",children:l.map(e=>s.jsxs("div",{className:"bg-white shadow-md rounded-lg overflow-hidden",children:[s.jsx("img",{src:e.Poster,alt:e.Title,className:"w-96 h-64 object-cover m-auto"}),s.jsxs("div",{className:"p-4",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:e.Title}),s.jsx("p",{className:"flex text-black m-auto justify-around font-semibold",children:e.Year})]}),e.othersCanSee?s.jsx("span",{class:"material-symbols-outlined ml-[90%] cursor-pointer",onClick:()=>p(e.imdbID),children:"person"}):s.jsx("span",{class:"material-symbols-outlined ml-[90%] cursor-pointer",onClick:()=>h(e.imdbID),children:"groups"})]},e.id))})}const v=x.memo(f);export{v as default};
